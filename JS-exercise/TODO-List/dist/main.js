(()=>{"use strict";class e{constructor(e,t){this.name=e,this.set=[],this.set.push(t)}addItem(e){this.set.push(e)}}class t{constructor(e,t){this.name=e,this.note=t}}class n{constructor(e,t){this.name=e,this.wardrobe=[],void 0!==t&&this.wardrobe.push(t)}getName(){return this.name}addWardobeItem(n,o,a){this.wardrobe.push(new e(n,new t(o,a)))}getWardrobeItem(e){console.log(e),this.wardrobe.forEach((t=>{e!==t.name?console.log(`no items found under the name ${e}`):t.set.forEach((e=>{console.log(`the item/s you were looking for is: ${e.name} note:${e.note} `)}))}))}getAllWardrobeForPerson(){this.wardrobe!=[]?this.wardrobe.forEach((e=>{e.set.forEach((t=>{console.log(`${e.name} name: ${t.name}. note: ${t.note}.`)}))})):console.log("no items to show")}}const o=document.getElementById("container"),a=document.getElementById("hikersContainer"),d=new class{save(e,t){localStorage.setItem(e,JSON.stringify(t))}saveB(n,o){const a=this.loadOne(n);a.wardrobe==o[0]?a.wardrobe[o[0]].push(new t(o[1],o[2])):a.wardrobe.push(new e(o[0],new t(o[1],o[2]))),this.save(n,a)}modify(e,t,n){if(console.log(e),null==t){const t=this.loadOne(e);t.name=n,this.save(n,t),this.remove("a",e)}else{const o=this.loadOne(e);o.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name==t[0].textContent&&(e.name=n[0],e.note=n[1])})),this.save(e,o)}))}}load(){const e=[];for(let t=0;t<localStorage.length;t++)e.push(Object.assign(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}consoleLogLocalStorage(){for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));console.log(t)}}remove(e,t){if("a"==e&&localStorage.removeItem(t),"b"==e){const e=this.loadOne(t[0]);e.wardrobe.forEach(((n,o)=>{n.set.forEach((n=>{n.name==t[1]&&(delete e.wardrobe[o],e.wardrobe=e.wardrobe.filter((function(e){return e})))}))})),this.save(t[0],e)}}loadOne(e){for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));if(e==n.name)return n}return 0}};(new class{init(){this.createHikerButton(),this.loadHikers(),this.ResetButton(),this.loadButton(),d.consoleLogLocalStorage()}ResetButton(){const e=document.createElement("button");e.textContent="Clear",o.appendChild(e),e.addEventListener("click",(()=>{localStorage.clear(),this.loadHikers()}))}loadButton(){const e=document.createElement("button");e.textContent="Load",o.appendChild(e),e.addEventListener("click",(()=>{this.load()}))}load(){this.clearContainer(),this.loadHikers()}clearContainer(){for(;a.firstChild;)a.removeChild(a.firstChild)}createElementOnScreen(e,t){const n=document.createElement("div");if("hiker"==t&&(n.setAttribute("id",e),n.setAttribute("class","hiker"),n.textContent=e,n.appendChild(this.addRemoveButton(e)),n.appendChild(this.addModifyButton(e)),n.appendChild(this.addWardrobeButton()),a.appendChild(n)),"item"==t[0]){const o=document.createElement("label"),a=document.createElement("label"),d=document.createElement("label");n.setAttribute("id","item"),o.setAttribute("id","text1"),a.setAttribute("id","text2"),d.setAttribute("id","breaker"),o.textContent=e[0],d.textContent=" // ",a.textContent=e[1],n.appendChild(o),n.appendChild(d),n.appendChild(a),n.appendChild(this.addRemoveButton(t[1])),n.appendChild(this.addModifyButton(t[1]))}return n}addModifyButton(e){const t=document.createElement("div");return t.textContent="M",t.setAttribute("id","modify"),t.setAttribute("class",e),t.setAttribute("title","modify the tab"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{this.modifyEventListener(e)})),t}addRemoveButton(e){const t=document.createElement("div");return t.textContent="X",t.style.color="red",t.setAttribute("id","remove"),t.setAttribute("class",e),t.setAttribute("title","remove the element"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{if("remove"==e.target.id&&"item"==e.target.parentElement.id){e.target.parentElement.style.display="none";const t=[];e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e.textContent)})),d.remove("b",[e.target.className,t[0],t[1]])}else e.target.parentElement.style.display="none",d.remove("a",e.target.className);this.load()})),t}addWardrobeButton(){const e=document.createElement("div");return e.setAttribute("id","addWardrobe"),e.setAttribute("title","add an element to the hiker"),e.textContent="A",e.style.float="right",e.style.display="inline-block",e.addEventListener("click",(e=>{e.target.parentElement.appendChild(this.createSelection(e.target.parentElement.id))})),e}createHikerButton(){const e=document.createElement("div");e.style.display="none";let t=document.createElement("button");t.textContent="Add a new Hiker",t.setAttribute("title","click to add a new hiker");let a=document.createElement("button");a.textContent="OK",a.setAttribute("title","confirm name");let l=document.createElement("INPUT");l.setAttribute("type","text"),e.appendChild(l),e.appendChild(a),o.appendChild(t),o.appendChild(e),t.addEventListener("click",(()=>{e.style.display="flex"})),a.addEventListener("click",(()=>{this.createElementOnScreen(l.value,"hiker"),d.save(l.value,new n(l.value)),e.style.display="none",l.value=""}))}modifyEventListener(e){const t=[],n=e.target.className,o=e.target.parentNode.parentNode.className;if(e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e)})),0==t.length)document.getElementById(n).appendChild(this.modifyHikerLayout(t,n,o));else{const a=e.target.parentNode.parentNode.childNodes;a[a.length-1].appendChild(this.modifyHikerLayout(t,n,o))}}modifyHikerLayout(e,t,n){const o=document.createElement("div");let a=document.createElement("INPUT");a.setAttribute("type","text"),a.setAttribute("id","inputField1");let l=document.createElement("INPUT");l.setAttribute("type","text"),l.setAttribute("id","inputField2");let i=document.createElement("button");return i.textContent="OK",i.setAttribute("title","confirm change"),0==e.length?(a.value=t,o.appendChild(a),o.appendChild(i),o.appendChild(this.addRemoveButton()),i.addEventListener("click",(()=>{t!=a.value&&(d.modify(t,void 0,a.value),this.load())}))):(a.value=e[0].textContent,l.value=e[1].textContent,o.appendChild(a),o.appendChild(l),o.appendChild(i),o.appendChild(this.addRemoveButton()),i.addEventListener("click",(()=>{let n=document.getElementById("inputField1").value,o=document.getElementById("inputField2").value;d.modify(t,e,[[n],[o]]),this.load()}))),o}loadHikers(){d.load().forEach((e=>{const t=this.createElementOnScreen(e.name,"hiker");for(let n=0;n<e.wardrobe.length;n++){let o=document.createElement("div");const a=e.name+"_"+e.wardrobe[n].name;null===document.getElementById(a)?(o.setAttribute("id",a),o.setAttribute("class",e.wardrobe[n].name),o.textContent=e.wardrobe[n].name,o.style.border="1px solid orange"):o=document.getElementById(a);let d=this.createElementOnScreen([[e.wardrobe[n].set[0].name],[e.wardrobe[n].set[0].note]],[["item"],[e.name]]);o.appendChild(d),t.appendChild(o)}a.appendChild(t)}))}createSelection(e){const t=document.createElement("div");t.setAttribute("id","element");const n=document.createElement("select");n.setAttribute("id","select");const o=document.createElement("option"),a=document.createElement("option"),l=document.createElement("option"),i=document.createElement("option"),r=document.createElement("option");o.textContent="Head",a.textContent="Body",l.textContent="Bottom",i.textContent="Shoes",r.textContent="Extra",n.appendChild(o),n.appendChild(a),n.appendChild(l),n.appendChild(i),n.appendChild(r);let s=document.createElement("INPUT");s.setAttribute("type","text"),s.setAttribute("id","inputName");let c=document.createElement("INPUT");c.setAttribute("type","text"),c.setAttribute("id","inputNote");let m=document.createElement("button");return m.textContent="Confirm",m.setAttribute("id","confirm"),m.setAttribute("title","confirm selection"),m.addEventListener("click",(o=>{if(""!=c.value&&0!=s.value){const o=e,a=n.value,l=s.value,i=c.value,r=document.createElement("div");r.textContent=a+": "+l+" // "+i,d.saveB(o,[a,l,i]),r.appendChild(this.addRemoveButton()),document.getElementById(e).appendChild(r),t.remove(),s.value=c.value=""}this.load()})),t.appendChild(n),t.appendChild(s),t.appendChild(c),t.appendChild(m),t.appendChild(this.addRemoveButton()),t}}).init()})();