(()=>{"use strict";class e{constructor(e,t){this.name=e,this.set=[],this.set.push(t)}addItem(e){this.set.push(e)}}class t{constructor(e,t,n){this.name=e,this.note=t,this.checkbox=n}}class n{constructor(e,t){this.name=e,this.wardrobe=[],void 0!==t&&this.wardrobe.push(t)}getName(){return this.name}addWardobeItem(n,o,a,l){this.wardrobe.push(new e(n,new t(o,a,l)))}getWardrobeItem(e){console.log(e),this.wardrobe.forEach((t=>{e!==t.name?console.log(`no items found under the name ${e}`):t.set.forEach((e=>{console.log(`the item/s you were looking for is: ${e.name} note:${e.note} `)}))}))}getAllWardrobeForPerson(){this.wardrobe!=[]?this.wardrobe.forEach((e=>{e.set.forEach((t=>{console.log(`${e.name} name: ${t.name}. note: ${t.note}.`)}))})):console.log("no items to show")}}const o=document.getElementById("container"),a=document.getElementById("hikersContainer"),l=new class{save(e,t){localStorage.setItem(e,JSON.stringify(t))}saveB(n,o){const a=this.loadOne(n);a.wardrobe==o[0]?a.wardrobe[o[0]].push(new t(o[1],o[2])):a.wardrobe.push(new e(o[0],new t(o[1],o[2]))),this.save(n,a)}modify(e,t,n){const o=this.loadOne(e);if(null==t)return o.name=n,this.save(n,o),void this.remove("a",e);1!=n&&0!=n?o.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name==t[0].textContent&&(e.name=n[0],e.note=n[1])})),this.save(e,o)})):o.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name==t[0]&&e.note==t[1]&&(e.checkbox=n)})),this.save(e,o)}))}load(){const e=[];0==localStorage.length&&this.createDEMOElements();for(let t=0;t<localStorage.length;t++)e.push(Object.assign(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}createDEMOElements(){const o=new n("Santi(Demo)",new e("Top",new t("Foldable hat","wide brim",!0)));o.addWardobeItem("Top","Bandana","cotton",!0),o.addWardobeItem("Body","Decathlon T-Shirt","easy dry",!1),o.addWardobeItem("Body","Hoodie","for walking",!0),o.addWardobeItem("Body","Hoodie","for resting",!1),o.addWardobeItem("Bottom","Hiking Trowsers","can be long/shorts",!1),o.addWardobeItem("Bottom","Shorts","for resting",!0),o.addWardobeItem("Extra","Wireless speaker","+cracked Spotify. remember phone data plan",!1),localStorage.setItem(o.getName(),JSON.stringify(o));const a=new n("Ennio(Demo)",new e("Top",new t("baseball cap","x2",!1)));localStorage.setItem(a.getName(),JSON.stringify(a));const l=new n("Francesco(Demo)",new e("Shoes",new t("hiking shoes","",!1)));this.save(l.getName(),l);const r=new n("Alessio(Demo)",new e("Extra",new t("External Charger","plus cables",!0)));r.addWardobeItem("Extra","Hiking poles","x2",!0),this.save(r.getName(),r)}consoleLogLocalStorage(){for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));console.log(t)}}remove(e,t){if("a"==e&&localStorage.removeItem(t),"b"==e){const e=this.loadOne(t[0]);e.wardrobe.forEach(((n,o)=>{n.set.forEach((n=>{n.name==t[1]&&(delete e.wardrobe[o],e.wardrobe=e.wardrobe.filter((function(e){return e})))}))})),this.save(t[0],e)}}loadOne(e){for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));if(e==n.name)return n}return 0}};!function(){function e(){l.load().forEach((e=>{const n=t(e.name,"hiker");for(let o=0;o<e.wardrobe.length;o++){let a=document.createElement("div");const l=e.name+"_"+e.wardrobe[o].name;null===document.getElementById(l)?(a.setAttribute("id",l),a.setAttribute("class",e.wardrobe[o].name),a.setAttribute("class","panel"),a.textContent=e.wardrobe[o].name,a.style.border="1px solid orange"):a=document.getElementById(l);let r=t([[e.wardrobe[o].set[0].name],[e.wardrobe[o].set[0].note],[e.wardrobe[o].set[0].checkbox]],[["item"],[e.name]]);a.appendChild(r),n.appendChild(a)}a.appendChild(n)}))}function t(t,n){const o=document.createElement("div");if(o.style.overflowX="auto","hiker"==n&&(o.setAttribute("id",t),o.setAttribute("class","hiker"),o.textContent=t,o.appendChild(d(t)),o.appendChild(i(t)),o.appendChild(function(){const e=document.createElement("img");return e.setAttribute("id","addWardrobe"),e.src="img/add.png",e.style.height="15px",e.setAttribute("title","add an element to the hiker"),e.textContent="A",e.style.float="right",e.style.display="inline-block",e.addEventListener("click",(e=>{e.target.parentElement.appendChild(function(e){const t=document.createElement("div");t.setAttribute("id","element");const n=document.createElement("select");n.setAttribute("id","select");const o=document.createElement("option"),a=document.createElement("option"),i=document.createElement("option"),s=document.createElement("option"),c=document.createElement("option");o.textContent="Head",a.textContent="Body",i.textContent="Bottom",s.textContent="Shoes",c.textContent="Extra",n.appendChild(o),n.appendChild(a),n.appendChild(i),n.appendChild(s),n.appendChild(c);let m=document.createElement("INPUT");m.setAttribute("type","text"),m.setAttribute("id","inputName");let p=document.createElement("INPUT");p.setAttribute("type","text"),p.setAttribute("id","inputNote");let h=document.createElement("button");return h.textContent="Confirm",h.setAttribute("id","confirm"),h.setAttribute("title","confirm selection"),h.addEventListener("click",(o=>{if(""!=p.value&&0!=m.value){const o=e,a=n.value,r=m.value,i=p.value,s=document.createElement("div");s.textContent=a+": "+r+" // "+i,l.saveB(o,[a,r,i]),s.appendChild(d()),document.getElementById(e).appendChild(s),t.remove(),m.value=p.value=""}r()})),t.appendChild(n),t.appendChild(m),t.appendChild(p),t.appendChild(h),t.appendChild(d()),t}(e.target.parentElement.id))})),e}()),o.appendChild(function(e){const t=document.createElement("img");return t.src="img/collapse.png",t.style.height="15px",t.setAttribute("id","collapse"),t.setAttribute("class",void 0),t.setAttribute("title","collapse the tab"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{!function(e){var n=e.target.parentElement;n.classList.toggle("active");var o=n.children;for(let e=0;e<o.length;e++)"block"===o[e].style.display&&"div"==o[e].localName&&"collapse"!=o[e].id?(o[e].style.display="none",t.src="img/expand.png",t.setAttribute("title","expand the tab")):(o[e].style.display="block",t.src="img/collapse.png",t.setAttribute("title","collapse the tab"))}(e)})),t}()),a.appendChild(o)),"item"==n[0]){const e=document.createElement("label"),a=document.createElement("label"),s=document.createElement("label");o.setAttribute("id","item"),e.setAttribute("id","text1"),a.setAttribute("id","text2"),s.setAttribute("id","breaker"),e.textContent=t[0],s.textContent=" // ",a.textContent=t[1],o.appendChild(e),o.appendChild(s),o.appendChild(a),o.appendChild(d(n[1])),o.appendChild(i(n[1])),o.appendChild(function(e,t){const n=document.createElement("img");return!0===t[0]?(n.src="img/checkboxY.png",n.setAttribute("id","checkboxY")):(n.src="img/checkboxN.png",n.setAttribute("id","checkboxN")),n.setAttribute("title","tick to confirm availability"),n.style.width="14px",n.style.float="right",n.style.display="inline-block",n.addEventListener("click",(t=>{if("checkboxN"==t.target.id){t.target.id="checkboxY",t.target.src="img/checkboxY.png";const n=t.target.parentNode.childNodes;l.modify(e,[n[0].textContent,n[2].textContent],!0)}else{t.target.id="checkboxN",t.target.src="img/checkboxN.png";const n=t.target.parentNode.childNodes;l.modify(e,[n[0].textContent,n[2].textContent],!1)}r()})),n}(n[1],t[2]))}function r(){for(;a.firstChild;)a.removeChild(a.firstChild);e()}function i(e){const t=document.createElement("img");function n(e,t){const n=document.createElement("div");let o=document.createElement("INPUT");o.setAttribute("type","text"),o.setAttribute("id","inputField1");let a=document.createElement("INPUT");a.setAttribute("type","text"),a.setAttribute("id","inputField2");let i=document.createElement("button");return i.textContent="OK",i.setAttribute("title","confirm change"),0==e.length?(o.value=t,n.appendChild(o),n.appendChild(i),n.appendChild(d()),i.addEventListener("click",(()=>{t!=o.value&&(l.modify(t,void 0,o.value),r())}))):(o.value=e[0].textContent,a.value=e[1].textContent,n.appendChild(o),n.appendChild(a),n.appendChild(i),n.appendChild(d()),i.addEventListener("click",(()=>{let n=document.getElementById("inputField1").value,o=document.getElementById("inputField2").value;l.modify(t,e,[[n],[o]]),r()}))),n}return t.src="img/modify.png",t.style.height="15px",t.textContent="M",t.setAttribute("id","modify"),t.setAttribute("class",e),t.setAttribute("title","modify the tab"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{!function(e){const t=[],o=e.target.className;if(e.target.parentNode.parentNode.className,e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e)})),0==t.length)document.getElementById(o).appendChild(n(t,o));else{const a=e.target.parentNode.parentNode.childNodes;a[a.length-1].appendChild(n(t,o))}}(e)})),t}function d(e){const t=document.createElement("img");return t.textContent="X",t.style.color="red",t.src="img/remove.png",t.style.height="15px",t.setAttribute("id","remove"),t.setAttribute("class",e),t.setAttribute("title","remove the element"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{if("remove"==e.target.id&&"item"==e.target.parentElement.id){e.target.parentElement.style.display="none";const t=[];e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e.textContent)})),l.remove("b",[e.target.className,t[0],t[1]])}else e.target.parentElement.style.display="none",l.remove("a",e.target.className);r()})),t}return o}!function(){const e=document.createElement("div");e.style.display="none";let a=document.createElement("img");a.src="img/addHiker.png",a.style.width="20px",a.style.margin="5px",a.setAttribute("title","click to add a new hiker");let r=document.createElement("button");r.textContent="OK",r.style.margin="0px 0px 2px 0px",r.style.border="2px solid white",r.style.backgroundColor="black",r.style.color="white",r.style.borderRadius="20px",r.setAttribute("title","confirm name");let i=document.createElement("INPUT");i.style.margin="0px 0px 2px 0px",i.style.backgroundColor="black",i.style.color="white",i.style.border="2px gray solid",i.style.borderRadius="5px",i.setAttribute("type","text"),i.setAttribute("placeholder","create a new Hiker"),e.appendChild(i),e.appendChild(r),o.appendChild(a),o.appendChild(e),a.addEventListener("click",(()=>{"none"==e.style.display?e.style.display="flex":e.style.display="none"})),r.addEventListener("click",(()=>{""!=i.value&&(t(i.value,"hiker"),l.save(i.value,new n(i.value)),i.value=""),e.style.display="none"}))}(),e()}()})();