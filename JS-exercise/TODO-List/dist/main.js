(()=>{"use strict";class e{constructor(e,t){this.name=e,this.set=[],this.set.push(t)}addItem(e){this.set.push(e)}}class t{constructor(e,t){this.name=e,this.note=t}}class n{constructor(e,t){this.name=e,this.wardrobe=[],void 0!==t&&this.wardrobe.push(t)}getName(){return this.name}addWardobeItem(n,l,a){this.wardrobe.push(new e(n,new t(l,a)))}getWardrobeItem(e){console.log(e),this.wardrobe.forEach((t=>{e!==t.name?console.log(`no items found under the name ${e}`):t.set.forEach((e=>{console.log(`the item/s you were looking for is: ${e.name} note:${e.note} `)}))}))}getAllWardrobeForPerson(){this.wardrobe!=[]?this.wardrobe.forEach((e=>{e.set.forEach((t=>{console.log(`${e.name} name: ${t.name}. note: ${t.note}.`)}))})):console.log("no items to show")}}const l=document.getElementById("container"),a=document.getElementById("hikersContainer"),o=new class{save(e,t){localStorage.setItem(e,JSON.stringify(t))}saveB(n,l){const a=this.loadOne(n);a.wardrobe==l[0]?a.wardrobe[l[0]].push(new t(l[1],l[2])):a.wardrobe.push(new e(l[0],new t(l[1],l[2]))),this.save(n,a)}modify(e,t,n){if(null==t){const t=this.loadOne(e);t.name=n,this.save(n,t),this.remove("a",e)}else{const l=this.loadOne(e);l.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name==t[0].textContent&&(e.name=n[0],e.note=n[1])})),this.save(e,l)}))}}load(){const e=[];for(let t=0;t<localStorage.length;t++)e.push(Object.assign(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}consoleLogLocalStorage(){for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));console.log(t)}}remove(e,t){if("a"==e&&localStorage.removeItem(t),"b"==e){const e=this.loadOne(t[0]);e.wardrobe.forEach(((n,l)=>{n.set.forEach((n=>{n.name==t[1]&&(delete e.wardrobe[l],e.wardrobe=e.wardrobe.filter((function(e){return e})))}))})),this.save(t[0],e)}}loadOne(e){for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));if(e==n.name)return n}return 0}};!function(){function e(){o.load().forEach((e=>{const n=t(e.name,"hiker");for(let l=0;l<e.wardrobe.length;l++){let a=document.createElement("div");const o=e.name+"_"+e.wardrobe[l].name;null===document.getElementById(o)?(a.setAttribute("id",o),a.setAttribute("class",e.wardrobe[l].name),a.setAttribute("class","panel"),a.textContent=e.wardrobe[l].name,a.style.border="1px solid orange"):a=document.getElementById(o);let i=t([[e.wardrobe[l].set[0].name],[e.wardrobe[l].set[0].note]],[["item"],[e.name]]);a.appendChild(i),n.appendChild(a)}a.appendChild(n)}))}function t(t,n){const l=document.createElement("div");if("hiker"==n&&(l.setAttribute("id",t),l.setAttribute("class","hiker"),l.textContent=t,l.appendChild(d(t)),l.appendChild(r(t)),l.appendChild(function(){const e=document.createElement("img");return e.setAttribute("id","addWardrobe"),e.src="img/add.png",e.style.height="15px",e.setAttribute("title","add an element to the hiker"),e.textContent="A",e.style.float="right",e.style.display="inline-block",e.addEventListener("click",(e=>{e.target.parentElement.appendChild(function(e){const t=document.createElement("div");t.setAttribute("id","element");const n=document.createElement("select");n.setAttribute("id","select");const l=document.createElement("option"),a=document.createElement("option"),r=document.createElement("option"),s=document.createElement("option"),c=document.createElement("option");l.textContent="Head",a.textContent="Body",r.textContent="Bottom",s.textContent="Shoes",c.textContent="Extra",n.appendChild(l),n.appendChild(a),n.appendChild(r),n.appendChild(s),n.appendChild(c);let m=document.createElement("INPUT");m.setAttribute("type","text"),m.setAttribute("id","inputName");let p=document.createElement("INPUT");p.setAttribute("type","text"),p.setAttribute("id","inputNote");let u=document.createElement("button");return u.textContent="Confirm",u.setAttribute("id","confirm"),u.setAttribute("title","confirm selection"),u.addEventListener("click",(l=>{if(""!=p.value&&0!=m.value){const l=e,a=n.value,i=m.value,r=p.value,s=document.createElement("div");s.textContent=a+": "+i+" // "+r,o.saveB(l,[a,i,r]),s.appendChild(d()),document.getElementById(e).appendChild(s),t.remove(),m.value=p.value=""}i()})),t.appendChild(n),t.appendChild(m),t.appendChild(p),t.appendChild(u),t.appendChild(d()),t}(e.target.parentElement.id))})),e}()),l.appendChild(function(e){const t=document.createElement("img");return t.src="img/collapse.png",t.style.height="15px",t.setAttribute("id","collapse"),t.setAttribute("class",void 0),t.setAttribute("title","collapse the tab"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{!function(e){var n=e.target.parentElement;n.classList.toggle("active");var l=n.children;for(let e=0;e<l.length;e++)"block"===l[e].style.display&&"div"==l[e].localName&&"collapse"!=l[e].id?(l[e].style.display="none",t.src="img/expand.png",t.setAttribute("title","expand the tab")):(l[e].style.display="block",t.src="img/collapse.png",t.setAttribute("title","collapse the tab"))}(e)})),t}()),a.appendChild(l)),"item"==n[0]){const e=document.createElement("label"),a=document.createElement("label"),o=document.createElement("label");l.setAttribute("id","item"),e.setAttribute("id","text1"),a.setAttribute("id","text2"),o.setAttribute("id","breaker"),e.textContent=t[0],o.textContent=" // ",a.textContent=t[1],l.appendChild(e),l.appendChild(o),l.appendChild(a),l.appendChild(d(n[1])),l.appendChild(r(n[1]))}function i(){for(;a.firstChild;)a.removeChild(a.firstChild);e()}function r(e){const t=document.createElement("img");function n(e,t,n){const l=document.createElement("div");let a=document.createElement("INPUT");a.setAttribute("type","text"),a.setAttribute("id","inputField1");let r=document.createElement("INPUT");r.setAttribute("type","text"),r.setAttribute("id","inputField2");let s=document.createElement("button");return s.textContent="OK",s.setAttribute("title","confirm change"),0==e.length?(a.value=t,l.appendChild(a),l.appendChild(s),l.appendChild(d()),s.addEventListener("click",(()=>{t!=a.value&&(o.modify(t,void 0,a.value),i())}))):(a.value=e[0].textContent,r.value=e[1].textContent,l.appendChild(a),l.appendChild(r),l.appendChild(s),l.appendChild(d()),s.addEventListener("click",(()=>{let n=document.getElementById("inputField1").value,l=document.getElementById("inputField2").value;o.modify(t,e,[[n],[l]]),i()}))),l}return t.src="img/modify.png",t.style.height="15px",t.textContent="M",t.setAttribute("id","modify"),t.setAttribute("class",e),t.setAttribute("title","modify the tab"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{!function(e){const t=[],l=e.target.className;e.target.parentNode.parentNode.className;if(e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e)})),0==t.length)document.getElementById(l).appendChild(n(t,l));else{const a=e.target.parentNode.parentNode.childNodes;a[a.length-1].appendChild(n(t,l))}}(e)})),t}function d(e){const t=document.createElement("img");return t.textContent="X",t.style.color="red",t.src="img/remove.png",t.style.height="15px",t.setAttribute("id","remove"),t.setAttribute("class",e),t.setAttribute("title","remove the element"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{if("remove"==e.target.id&&"item"==e.target.parentElement.id){e.target.parentElement.style.display="none";const t=[];e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e.textContent)})),o.remove("b",[e.target.className,t[0],t[1]])}else e.target.parentElement.style.display="none",o.remove("a",e.target.className);i()})),t}return l}!function(){const e=document.createElement("div");e.style.display="none";let a=document.createElement("img");a.src="img/addHiker.png",a.style.width="20px",a.style.margin="5px",a.setAttribute("title","click to add a new hiker");let i=document.createElement("button");i.textContent="OK",i.style.margin="0px 0px 2px 0px",i.setAttribute("title","confirm name");let r=document.createElement("INPUT");r.style.margin="0px 0px 2px 0px",r.setAttribute("type","text"),e.appendChild(r),e.appendChild(i),l.appendChild(a),l.appendChild(e),a.addEventListener("click",(()=>{"none"==e.style.display?e.style.display="flex":e.style.display="none"})),i.addEventListener("click",(()=>{""!=r.value&&(t(r.value,"hiker"),o.save(r.value,new n(r.value)),r.value=""),e.style.display="none"}))}(),e(),o.consoleLogLocalStorage()}()})();