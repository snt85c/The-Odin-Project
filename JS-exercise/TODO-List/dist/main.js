(()=>{"use strict";class e{constructor(e,t){this.name=e,this.set=[],this.set.push(t)}addItem(e){this.set.push(e)}}class t{constructor(e,t){this.name=e,this.note=t}}class n{save(e,t){localStorage.setItem(e,JSON.stringify(t)),console.log("saveA")}saveB(n,o){const a=this.loadOne(n);a.wardrobe==o[0]?a.wardrobe[o[0]].push(new t(o[1],o[2])):(a.wardrobe.push(new e(o[0],new t(o[1],o[2]))),this.save(n,a)),console.log("saveB"),this.consoleLogLocalStorage()}modify(e,t,n,o){if(console.log(e),null==t&&null==n){const t=this.loadOne(e);t.name=o,this.save(o,t),console.log("modify")}else{const t=this.loadOne(e);t.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name==n[0].textContent&&(e.name=o[0],e.note=o[1])})),this.save(e,t)}))}this.remove("a",e)}load(){const e=[];for(let t=0;t<localStorage.length;t++)e.push(Object.assign(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}consoleLogLocalStorage(){for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));console.log(t)}}remove(e,t){"a"==e&&(console.log(t),localStorage.removeItem(t),this.consoleLogLocalStorage(),console.log("remove A")),"b"==e&&console.log("remove B")}loadOne(e){for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));if(e==n.name)return n}return 0}}class o{constructor(e,t){this.name=e,this.wardrobe=[],void 0!==t&&this.wardrobe.push(t)}getName(){return this.name}addWardobeItem(n,o,a){this.wardrobe.push(new e(n,new t(o,a)))}getWardrobeItem(e){console.log(e),this.wardrobe.forEach((t=>{e!==t.name?console.log(`no items found under the name ${e}`):t.set.forEach((e=>{console.log(`the item/s you were looking for is: ${e.name} note:${e.note} `)}))}))}getAllWardrobeForPerson(){this.wardrobe!=[]?this.wardrobe.forEach((e=>{e.set.forEach((t=>{console.log(`${e.name} name: ${t.name}. note: ${t.note}.`)}))})):console.log("no items to show")}}const a=document.getElementById("container"),d=document.getElementById("hikersContainer"),l=new n;new n,(new class{init(){this.createHikerButton(),this.loadHikers(),l.consoleLogLocalStorage()}createHikerButton(){const e=document.createElement("div");e.style.display="none";let t=document.createElement("button");t.textContent="Add a new Hiker",t.setAttribute("title","click to add a new hiker");let n=document.createElement("button");n.textContent="OK",n.setAttribute("title","confirm name");let d=document.createElement("INPUT");d.setAttribute("type","text"),e.appendChild(d),e.appendChild(n),a.appendChild(t),a.appendChild(e),t.addEventListener("click",(()=>{e.style.display="flex"})),n.addEventListener("click",(()=>{this.createElementOnScreen(d.value,"hiker"),l.save(d.value,new o(d.value)),e.style.display="none",d.value=""})),document.addEventListener("click",(e=>{"addWardrobe"==e.target.id&&e.target.parentElement.appendChild(this.createSelection(e.target.parentElement.id))}))}createElementOnScreen(e,t){const n=document.createElement("div");if("hiker"==t&&(n.setAttribute("id",e),n.setAttribute("class","hiker"),n.textContent=e,n.appendChild(this.addRemoveButton(e)),n.appendChild(this.addModifyButton(e)),n.appendChild(this.addWardrobeButton()),d.appendChild(n)),"item"==t[0]){const o=document.createElement("label"),a=document.createElement("label"),d=document.createElement("label");n.setAttribute("id","item"),o.setAttribute("id","text1"),a.setAttribute("id","text2"),d.setAttribute("id","breaker"),o.textContent=e[0],d.textContent=" // ",a.textContent=e[1],n.appendChild(o),n.appendChild(d),n.appendChild(a),n.appendChild(this.addRemoveButton(t[1])),n.appendChild(this.addModifyButton(t[1]))}return n}addWardrobeButton(){const e=document.createElement("div");return e.setAttribute("id","addWardrobe"),e.setAttribute("title","add an element to the hiker"),e.textContent="A",e.style.float="right",e.style.display="inline-block",e}addRemoveButton(e){const t=document.createElement("div");return t.textContent="X",t.style.color="red",t.setAttribute("id","remove"),t.setAttribute("class",e),t.setAttribute("title","remove the element"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(t=>{if("remove"==t.target.id&&"item"==t.target.parentElement.id&&l.remove("b",t.target.parentElement.class),"remove"==t.target.id){const n=document.getElementsByClassName(e);t.target.parentElement.style.display="none",l.remove("a",n[0].className)}})),t}addModifyButton(e){const t=document.createElement("div");return t.textContent="M",t.setAttribute("id","modify"),t.setAttribute("class",e),t.setAttribute("title","modify the tab"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{"modify"==e.target.id&&this.modifyEventListener(e)})),t}modifyEventListener(e){const t=[],n=e.target.className,o=e.target.parentNode.parentNode.className;e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e)}));const a=e.target.parentNode.parentNode.childNodes;0==t.length?document.getElementById(n).appendChild(this.modifyHikerLayout(t,n,o)):a[a.length-1].appendChild(this.modifyHikerLayout(t,n,o))}modifyHikerLayout(e,t,n){const o=document.createElement("div");let a=document.createElement("INPUT");a.setAttribute("type","text"),a.setAttribute("id","inputField1");let d=document.createElement("INPUT");d.setAttribute("type","text"),d.setAttribute("id","inputField2");let i=document.createElement("button");return i.textContent="OK",i.setAttribute("title","confirm change"),0==e.length?(a.value=t,o.appendChild(a),o.appendChild(i),o.appendChild(this.addRemoveButton()),i.addEventListener("click",(()=>{console.log(t),l.modify(t,void 0,void 0,a.value)}))):(a.value=e[0].textContent,d.value=e[1].textContent,o.appendChild(a),o.appendChild(d),o.appendChild(i),o.appendChild(this.addRemoveButton()),i.addEventListener("click",(()=>{let o=document.getElementById("inputField1").value,a=document.getElementById("inputField2").value;l.modify(t,n,e,[[o],[a]])}))),o}loadHikers(){l.load().forEach((e=>{const t=this.createElementOnScreen(e.name,"hiker");for(let n=0;n<e.wardrobe.length;n++){let o=document.createElement("div");const a=e.name+"_"+e.wardrobe[n].name;null==document.getElementById(a)?(o.setAttribute("id",a),o.setAttribute("class",e.wardrobe[n].name),o.textContent=e.wardrobe[n].name,o.style.border="1px solid orange"):o=document.getElementById(a);let d=this.createElementOnScreen([[e.wardrobe[n].set[0].name],[e.wardrobe[n].set[0].note]],[["item"],[e.name]]);o.appendChild(d),t.appendChild(o)}}))}createSelection(e){const t=document.createElement("div");t.setAttribute("id","element");const n=document.createElement("select");n.setAttribute("id","select");const o=document.createElement("option"),a=document.createElement("option"),d=document.createElement("option"),i=document.createElement("option"),r=document.createElement("option");o.textContent="Head",a.textContent="Body",d.textContent="Bottom",i.textContent="Shoes",r.textContent="Extra",n.appendChild(o),n.appendChild(a),n.appendChild(d),n.appendChild(i),n.appendChild(r);let s=document.createElement("INPUT");s.setAttribute("type","text"),s.setAttribute("id","inputName");let c=document.createElement("INPUT");c.setAttribute("type","text"),c.setAttribute("id","inputNote");let m=document.createElement("button");return m.textContent="Confirm",m.setAttribute("id","confirm"),m.setAttribute("title","confirm selection"),document.addEventListener("click",(o=>{if("confirm"==o.target.id&&""!=c.value&&0!=s.value){const o=e,a=n.value,d=s.value,i=c.value,r=document.createElement("div");r.textContent=a+": "+d+" // "+i,l.saveB(o,[a,d,i]),r.appendChild(this.addRemoveButton()),document.getElementById(e).appendChild(r),t.remove(),s.value=c.value=""}})),t.appendChild(n),t.appendChild(s),t.appendChild(c),t.appendChild(m),t.appendChild(this.addRemoveButton()),t}}).init()})();