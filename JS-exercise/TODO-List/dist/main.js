(()=>{"use strict";class e{constructor(e,t){this.name=e,this.set=[],this.set.push(t)}addItem(e){this.set.push(e)}}class t{constructor(e,t){this.name=e,this.note=t}}class n{save(e,t){localStorage.setItem(e,JSON.stringify(t)),console.log("saveA"),this.consoleLogLocalStorage()}saveB(n,o){const a=this.loadOne(n);a.wardrobe==o[0]?a.wardrobe[o[0]].push(new t(o[1],o[2])):(a.wardrobe.push(new e(o[0],new t(o[1],o[2]))),this.save(n,a)),console.log("saveB"),this.consoleLogLocalStorage()}modify(e,t,n){null==t&&null==n&&this.loadOne(e)}load(){const e=[];for(let t=0;t<localStorage.length;t++)e.push(Object.assign(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}consoleLogLocalStorage(){for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));console.log(t)}}remove(e){localStorage.removeItem(e),this.load()}loadOne(e){for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));if(n.name===e)return n}return-1}}class o{constructor(e,t){this.name=e,this.wardrobe=[],void 0!==t&&this.wardrobe.push(t)}getName(){return this.name}addWardobeItem(n,o,a){this.wardrobe.push(new e(n,new t(o,a)))}getWardrobeItem(e){console.log(e),this.wardrobe.forEach((t=>{e!==t.name?console.log(`no items found under the name ${e}`):t.set.forEach((e=>{console.log(`the item/s you were looking for is: ${e.name} note:${e.note} `)}))}))}getAllWardrobeForPerson(){this.wardrobe!=[]?this.wardrobe.forEach((e=>{e.set.forEach((t=>{console.log(`${e.name} name: ${t.name}. note: ${t.note}.`)}))})):console.log("no items to show")}}const a=document.getElementById("container"),d=document.getElementById("hikersContainer"),r=new n;new n,(new class{init(){this.createHiker(),this.loadHikers(),document.addEventListener("click",(e=>{console.log(e.target.parentElement)})),document.addEventListener("click",(e=>{if("modify"==e.target.id&&"item"==e.target.parentElement.id){const t=this.modifyHiker();e.target.appendChild(t);const n=e.target.parentNode.childNodes,o=[],a=e.target.parentNode.parentNode.parentNode.id,d=e.target.parentNode.parentNode.className;n.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&o.push(e)})),r.modify(a,d,o)}else r.modify(e.target.parentElement.id)}))}createHiker(){const e=document.createElement("div");e.style.display="none";let t=document.createElement("button");t.textContent="Add a new Hiker",t.setAttribute("title","click to add a new hiker");let n=document.createElement("button");n.textContent="OK",n.setAttribute("title","confirm name");let d=document.createElement("INPUT");d.setAttribute("type","text"),e.appendChild(d),e.appendChild(n),a.appendChild(t),a.appendChild(e),t.addEventListener("click",(()=>{e.style.display="flex"})),n.addEventListener("click",(()=>{this.createElementOnScreen(d.value,"hiker"),r.save(d.value,new o(d.value)),e.style.display="none",d.value=""})),document.addEventListener("click",(e=>{"addWardrobe"==e.target.id&&e.target.parentElement.appendChild(this.createSelection(e.target.parentElement.id))}))}modifyHiker(){const e=document.createElement("div");let t=document.createElement("INPUT");t.setAttribute("type","text");let n=document.createElement("INPUT");n.setAttribute("type","text");let o=document.createElement("button");return o.textContent="OK",o.setAttribute("title","confirm change"),e.appendChild(t),e.appendChild(n),e.appendChild(o),e.appendChild(this.addRemoveButton()),e}createElementOnScreen(e,t){const n=document.createElement("div"),o=document.createElement("div");if("hiker"==t&&(n.setAttribute("id",e),n.setAttribute("class","hiker"),n.textContent=e,n.appendChild(this.addRemoveButton()),n.appendChild(this.addModifyButton()),n.appendChild(this.addWardrobeButton()),n.appendChild(o),d.appendChild(n)),"item"==t){const t=document.createElement("label"),o=document.createElement("label"),a=document.createElement("label");n.setAttribute("id","item"),t.setAttribute("id","text1"),o.setAttribute("id","text2"),a.setAttribute("id","breaker"),a.textContent=" // ",t.textContent=e[0],o.textContent=e[1],n.appendChild(t),n.appendChild(a),n.appendChild(o),n.appendChild(this.addRemoveButton()),n.appendChild(this.addModifyButton())}return n}addWardrobeButton(){const e=document.createElement("div");return e.setAttribute("id","addWardrobe"),e.setAttribute("title","add an element to the hiker"),e.textContent="A",e.style.float="right",e.style.display="inline-block",e}addRemoveButton(){const e=document.createElement("div");return e.textContent="X",e.style.color="red",e.setAttribute("id","remove"),e.setAttribute("title","remove the element"),e.style.float="right",e.style.display="inline-block",document.addEventListener("click",(e=>{"remove"==e.target.id&&"item"==e.target.parentElement.id&&(r.remove(e.target.parentElement.class),console.log()),"remove"==e.target.id&&(e.target.parentElement.style.display="none",r.remove(e.target.parentElement.id))})),e}addModifyButton(){const e=document.createElement("div");return e.textContent="M",e.setAttribute("id","modify"),e.setAttribute("title","modify the tab"),e.style.float="right",e.style.display="inline-block",e}loadHikers(){r.load().forEach((e=>{const t=this.createElementOnScreen(e.name,"hiker");for(let n=0;n<e.wardrobe.length;n++){let o=document.createElement("div");const a=e.name+"_"+e.wardrobe[n].name;null==document.getElementById(a)?(o.setAttribute("id",a),o.setAttribute("class",e.wardrobe[n].name),o.textContent=e.wardrobe[n].name,o.style.border="1px solid orange"):o=document.getElementById(a);let d=this.createElementOnScreen([[e.wardrobe[n].set[0].name],[e.wardrobe[n].set[0].note]],"item");o.appendChild(d),t.appendChild(o)}}))}createSelection(e){const t=document.createElement("div");t.setAttribute("id","element");const n=document.createElement("select");n.setAttribute("id","select");const o=document.createElement("option"),a=document.createElement("option"),d=document.createElement("option"),l=document.createElement("option"),i=document.createElement("option");o.textContent="Head",a.textContent="Body",d.textContent="Bottom",l.textContent="Shoes",i.textContent="Extra",n.appendChild(o),n.appendChild(a),n.appendChild(d),n.appendChild(l),n.appendChild(i);let s=document.createElement("INPUT");s.setAttribute("type","text"),s.setAttribute("id","inputName");let c=document.createElement("INPUT");c.setAttribute("type","text"),c.setAttribute("id","inputNote");let m=document.createElement("button");return m.textContent="Confirm",m.setAttribute("id","confirm"),m.setAttribute("title","confirm selection"),document.addEventListener("click",(o=>{if("confirm"==o.target.id&&""!=c.value&&0!=s.value){const o=e,a=n.value,d=s.value,l=c.value,i=document.createElement("div");i.textContent=a+": "+d+" // "+l,r.saveB(o,[a,d,l]),i.appendChild(this.addRemoveButton()),document.getElementById(e).appendChild(i),t.remove(),s.value=c.value=""}})),t.appendChild(n),t.appendChild(s),t.appendChild(c),t.appendChild(m),t.appendChild(this.addRemoveButton()),t}}).init()})();